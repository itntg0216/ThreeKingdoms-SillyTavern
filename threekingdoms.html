<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Ê±âÊú´Á∫¢È¢úÂΩï¬∑Âø´ÈÄüÂàõÂª∫ËßíËâ≤</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Noto+Serif+SC:wght@400;500;700&display=swap');

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg-color: #f5efe6;
            --text-color: #4a3b31;
            --border-color: #d3c5b3;
            --border-strong-color: #785a4e;
            --title-color: #5d4037;
            --item-bg-color: rgba(253, 250, 245, 0.95);
            --item-bg-hover-color: #e8ddcb;
            --item-bg-selected-color: #d7c8b6;
            --container-bg-color: rgba(240, 230, 210, 0.95);
            --title-font: 'Cinzel', serif;
            --body-font: 'Noto Serif SC', serif;
        }

        body {
            font-family: var(--body-font);
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 15px;
            min-height: 100vh;
            background-image: url('data:image/png;base64,iVBORw0KUAhEUgAAADIAAAAyCAMAAAAp4XiGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAADdAAAA3QFwU6IHAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAABbUExURQAAAP////f3+Pj4+fX19vb2+PT09Pj4+d/f4O/v8fPz9PX19vf3+Pn5+fb29/Hx8/T09fX19fX19////97e4Ojo6fHx8/Ly8/X19fX19fDw8vX19e/v8fj4+Pf3+AAAADSAx5YAAAAfdFJOUwAAAAAAAAAAAAAAAMA/z/BAgMBAwBCgwFBPT1BQUD9/Py8vRkQoCgAAAQBJREFUSMftlVuSgyAQhUNtZRAScQExPff9H3CBQsEMZDDpOf2EM8P9NZnZzI5KEfEPMGOIsIApFgAAFDtAAmWiIAMAWGDVQDQAAkYMm9RhpJbrBLhZ1Z6yGvWq2xWA92i6ZXRtC50EAADg0n8ErvDY2esxAEBW96Fz0Npq7H0AGBzh6MrAgAAgAEEyNiyL00mDgCsvt9jX6gAEEPg2pS8HAABgB2b0ONnuaR4AQDG9OQCAfQD8XRsBACJmk/+1WwUALg7A8IUBjgh0JGBgAJY2YB+S/VB9aKjpx5EDP5HAPk7Jm4tJgLeJ3I0LANT3/k7K/r5Q/AAAFYxxfYq1LAAAAABJRU5ErkJggg==');
            background-repeat: repeat;
        }

        .selector-scroll {
            border: 2px solid var(--border-strong-color);
            border-radius: 12px;
            padding: 20px 15px;
            background-color: var(--container-bg-color);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
        }

        .page-super-title {
            font-family: var(--title-font);
            font-weight: 700;
            text-align: center;
            font-size: 2em;
            color: var(--title-color);
            margin: 10px 0 15px;
            letter-spacing: 1px;
        }

        .ornamental-divider {
            border: 0;
            height: 1px;
            background-color: var(--border-color);
            position: relative;
            margin: 15px auto;
            width: 70%;
        }

        .ornamental-divider::after {
            content: '‚ùñ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--container-bg-color);
            padding: 0 12px;
            color: var(--title-color);
            font-size: 1.4em;
        }

        .main-title {
            font-family: var(--title-font);
            font-weight: 700;
            color: var(--title-color);
            text-align: center;
            margin: 0 0 15px;
            font-size: 1.5em;
        }

        .instructions {
            text-align: center;
            margin-bottom: 20px;
            font-size: 0.9em;
            color: #6a514d;
            line-height: 1.5;
        }

        /* ÂàáÊç¢Ê†áÁ≠æÔºàÈ¢ÑËÆæ/Ëá™ÂÆö‰πâÔºâ */
        .tab-group {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }

        .tab-button {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--item-bg-color);
            color: var(--title-color);
            font-family: var(--body-font);
            font-weight: 500;
            font-size: 1em;
            cursor: pointer;
            text-align: center;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .tab-button.active {
            background-color: var(--item-bg-selected-color);
            border-color: var(--border-strong-color);
            font-weight: 700;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ÊåâÈíÆÊ†∑ÂºèÔºàË∂ÖÂ§ßËß¶Êë∏Âå∫ÂüüÔºâ */
        .btn {
            font-family: var(--body-font);
            font-weight: 500;
            font-size: 1.05em;
            padding: 14px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            width: 100%;
            margin-top: 15px;
        }

        .btn-primary {
            background-color: var(--item-bg-selected-color);
            color: var(--title-color);
            border: 1px solid var(--border-strong-color);
        }

        .btn-secondary {
            background-color: var(--item-bg-color);
            color: var(--title-color);
            border: 1px solid var(--border-color);
            margin-top: 10px;
        }

        .btn:hover, .btn:active {
            transform: scale(1.02);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* È¢ÑËÆæÂú∫ÊôØÂàóË°® */
        .scene-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            list-style: none;
            margin-bottom: 20px;
        }

        .scene-item {
            background: var(--item-bg-color);
            border: 1px solid var(--border-color);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1em;
        }

        .scene-item.selected {
            background-color: var(--item-bg-selected-color);
            border-color: var(--border-strong-color);
            color: var(--title-color);
            font-weight: 500;
        }

        .scene-item:hover, .scene-item:active {
            border-color: var(--border-strong-color);
            transform: translateX(3px);
        }

        /* Ë°®ÂçïÊ†∑Âºè */
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 18px;
        }

        .form-label {
            font-weight: 500;
            color: var(--title-color);
            font-size: 1em;
        }

        .form-input {
            padding: 14px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: var(--body-font);
            font-size: 1em;
            background-color: var(--item-bg-color);
            color: var(--text-color);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--border-strong-color);
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            flex: 1 1 calc(50% - 4px);
            min-width: 140px;
            font-size: 0.9em;
        }

        .radio-option input {
            accent-color: var(--border-strong-color);
            transform: scale(1.2);
            margin-right: 5px;
        }

        .radio-option.selected {
            background-color: var(--item-bg-selected-color);
            border-color: var(--title-color);
        }

        /* Â±ûÊÄßÊªëÂùó */
        .stats-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .stat-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-name {
            font-weight: 500;
        }

        .stat-value {
            color: var(--border-strong-color);
            font-weight: 700;
        }

        .stat-slider {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background-color: var(--border-color);
            accent-color: var(--border-strong-color);
            cursor: pointer;
        }

        .stat-desc {
            font-size: 0.85em;
            color: #6a514d;
        }

        .total-stats {
            text-align: center;
            font-size: 0.9em;
            color: var(--title-color);
            margin-top: 5px;
        }

        /* Ëá™ÂÆö‰πâËæìÂÖ•ÁªÑ */
        .custom-input-group {
            margin-top: 10px;
            display: none;
        }

        .custom-input-group.active {
            display: block;
        }

        /* ÂâßÊÉÖÈÄâÊã©È°µ */
        #plot-step {
            display: none;
        }

        #plot-step.active {
            display: block;
        }

        .plot-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            list-style: none;
            margin-bottom: 20px;
        }

        .plot-item {
            background: var(--item-bg-color);
            border: 1px solid var(--border-color);
            padding:            padding: 15px;
            min-height: 100vh;
            background-image: url('data:image/png;base64,iVBORw0KUAhEUgAAADIAAAAyCAMAAAAp4XiGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAADdAAAA3QFwU6IHAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAABbUExURQAAAP////f3+Pj4+fX19vb2+PT09Pj4+d/f4O/v8fPz9PX19vf3+Pn5+fb29/Hx8/T09fX19fX19////97e4Ojo6fHx8/Ly8/X19fX19fDw8vX19e/v8fj4+Pf3+AAAADSAx5YAAAAfdFJOUwAAAAAAAAAAAAAAAMA/z/BAgMBAwBCgwFBPT1BQUD9/Py8vRkQoCgAAAQBJREFUSMftlVuSgyAQhUNtZRAScQExPff9H3CBQsEMZDDpOf2EM8P9NZnZzI5KEfEPMGOIsIApFgAAFDtAAmWiIAMAWGDVQDQAAkYMm9RhpJbrBLhZ1Z6yGvWq2xWA92i6ZXRtC50EAADg0n8ErvDY2esxAEBW96Fz0Npq7H0AGBzh6MrAgAAgAEEyNiyL00mDgCsvt9jX6gAEEPg2pS8HAABgB2b0ONnuaR4AQDG9OQCAfQD8XRsBACJmk/+1WwUALg7A8IUBjgh0JGBgAJY2YB+S/VB9aKjpx5EDP5HAPk7Jm4tJgLeJ3I0LANT3/k7K/r5Q/AAAFYxxfYq1LAAAAABJRU5ErkJggg==');
            background-repeat: repeat;
            background-size: auto;
        }

        .selector-scroll {
            border: 2px solid var(--border-strong-color);
            border-radius: 12px;
            padding: 20px 15px;
            background-color: var(--container-bg-color);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
        }

        .page-super-title {
            font-family: var(--title-font);
            font-weight: 700;
            text-align: center;
            font-size: 2em;
            color: var(--title-color);
            margin: 10px 0 15px;
            letter-spacing: 1px;
        }

        .ornamental-divider {
            border: 0;
            height: 1px;
            background-color: var(--border-color);
            position: relative;
            margin: 20px auto;
            width: 70%;
        }

        .ornamental-divider::after {
            content: '‚ùñ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--container-bg-color);
            padding: 0 12px;
            color: var(--title-color);
            font-size: 1.4em;
            line-height: 1;
        }

        .info-panel {
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            background-color: var(--item-bg-color);
        }

        .info-panel > summary {
            font-family: var(--title-font);
            font-weight: 700;
            font-size: 1em;
            color: var(--title-color);
            background-color: var(--item-bg-selected-color);
            padding: 12px 15px;
            cursor: pointer;
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .arrow-toggle {
            font-size: 0.9em;
        }

        .info-content {
            padding: 15px;
            line-height: 1.6;
            font-size: 0.95em;
        }

        .info-content h3 {
            font-family: var(--title-font);
            color: var(--title-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 6px;
            margin: 15px 0 10px;
            font-size: 1.2em;
        }

        .world-quote {
            background-color: rgba(245, 239, 230, 0.5);
            border-left: 3px solid var(--border-strong-color);
            padding: 10px 15px;
            margin: 12px 0;
            font-style: italic;
            color: #5d4037;
            font-size: 0.9em;
        }

        .main-title {
            font-family: var(--title-font);
            font-weight: 700;
            color: var(--title-color);
            text-align: center;
            margin: 0 0 15px;
            font-size: 1.6em;
        }

        .instructions {
            text-align: center;
            margin-bottom: 20px;
            font-size: 0.9em;
            color: #6a514d;
            line-height: 1.5;
        }

        /* ÊåâÈíÆÊ†∑ÂºèÔºàÁßªÂä®Á´ØËß¶Êë∏‰ºòÂåñÔºâ */
        .recheck-button, .submit-button {
            font-family: var(--body-font);
            font-weight: 500;
            font-size: 1em;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .recheck-button {
            color: var(--title-color);
            background-color: var(--item-bg-color);
            border: 1px solid var(--border-color);
            margin: 0 5px;
            min-width: 120px;
        }

        .recheck-button:hover, .recheck-button:active {
            background-color: var(--item-bg-hover-color);
            border-color: var(--border-strong-color);
            transform: scale(1.03);
        }

        .submit-button {
            font-family: var(--title-font);
            color: var(--title-color);
            background-color: var(--item-bg-selected-color);
            border: 1px solid var(--border-strong-color);
            width: 100%;
            margin-top: 15px;
            padding: 14px;
            font-size: 1.05em;
        }

        .submit-button:hover, .submit-button:active {
            background-color: #c9bba9;
            transform: scale(1.02);
        }

        .step-footer {
            text-align: center;
            margin-top: 25px;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* ÈÄâÈ°πÂàóË°®ÔºàÁßªÂä®Á´ØËß¶Êë∏‰ºòÂåñÔºâ */
        .scenario-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            padding: 0;
            margin: 0;
            list-style: none;
        }

        .scenario-option {
            font: inherit;
            color: inherit;
            background: var(--item-bg-color);
            border: 1px solid var(--border-color);
            text-align: left;
            width: 100%;
            padding: 15px 15px 15px 45px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            font-size: 1em;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .scenario-option::before {
            content: 'üìú';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
            opacity: 0.7;
        }

        .scenario-option:hover, .scenario-option:active {
            background-color: var(--item-bg-hover-color);
            border-color: var(--border-strong-color);
            transform: translateX(3px);
        }

        .scenario-option.selected {
            background-color: var(--item-bg-selected-color);
            border-color: var(--title-color);
            color: var(--title-color);
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .scenario-option.selected::after {
            content: '‚úì';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: var(--title-color);
        }

        .control-panel-container {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: rgba(253, 250, 245, 0.95);
            padding: 15px;
            margin: 20px 0;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.05);
        }

        /* Ë°®ÂçïÊ†∑ÂºèÔºàÁßªÂä®Á´ØÈÄÇÈÖçÔºâ */
        .custom-char-form {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-weight: 500;
            color: var(--title-color);
            font-size: 1em;
        }

        .form-input {
            padding: 14px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: var(--body-font);
            font-size: 1em;
            background-color: var(--item-bg-color);
            color: var(--text-color);
            width: 100%;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--border-strong-color);
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            g            min-height: 100vh;
            background-image: url('data:image/png;base64,iVBORw0KUAhEUgAAADIAAAAyCAMAAAAp4XiGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAADdAAAA3QFwU6IHAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAABbUExURQAAAP////f3+Pj4+fX19vb2+PT09Pj4+d/f4O/v8fPz9PX19vf3+Pn5+fb29/Hx8/T09fX19fX19////97e4Ojo6fHx8/Ly8/X19fX19fDw8vX19e/v8fj4+Pf3+AAAADSAx5YAAAAfdFJOUwAAAAAAAAAAAAAAAMA/z/BAgMBAwBCgwFBPT1BQUD9/Py8vRkQoCgAAAQBJREFUSMftlVuSgyAQhUNtZRAScQExPff9H3CBQsEMZDDpOf2EM8P9NZnZzI5KEfEPMGOIsIApFgAAFDtAAmWiIAMAWGDVQDQAAkYMm9RhpJbrBLhZ1Z6yGvWq2xWA92i6ZXRtC50EAADg0n8ErvDY2esxAEBW96Fz0Npq7H0AGBzh6MrAgAAgAEEyNiyL00mDgCsvt9jX6gAEEPg2pS8HAABgB2b0ONnuaR4AQDG9OQCAfQD8XRsBACJmk/+1WwUALg7A8IUBjgh0JGBgAJY2YB+S/VB9aKjpx5EDP5HAPk7Jm4tJgLeJ3I0LANT3/k7K/r5Q/AAAFYxxfYq1LAAAAABJRU5ErkJggg==');
            background-repeat: repeat;
        }

        .selector-scroll {
            border: 2px solid var(--border-strong-color);
            border-radius: 12px;
            padding: 20px 15px;
            background-color: var(--container-bg-color);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
        }

        .page-super-title {
            font-family: var(--title-font);
            font-weight: 700;
            text-align: center;
            font-size: 2em;
            color: var(--title-color);
            margin: 10px 0 15px;
            letter-spacing: 1px;
        }

        .ornamental-divider {
            border: 0;
            height: 1px;
            background-color: var(--border-color);
            position: relative;
            margin: 20px auto;
            width: 70%;
        }

        .ornamental-divider::after {
            content: '‚ùñ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--container-bg-color);
            padding: 0 12px;
            color: var(--title-color);
            font-size: 1.4em;
        }

        .info-panel {
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            background-color: var(--item-bg-color);
        }

        .info-panel > summary {
            font-family: var(--title-font);
            font-weight: 700;
            font-size: 1em;
            color: var(--title-color);
            background-color: var(--item-bg-selected-color);
            padding: 12px 15px;
            cursor: pointer;
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .arrow-toggle {
            font-size: 0.9em;
        }

        .info-content {
            padding: 15px;
            line-height: 1.6;
            font-size: 0.95em;
        }

        .info-content h3 {
            font-family: var(--title-font);
            color: var(--title-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 6px;
            margin: 15px 0 10px;
            font-size: 1.2em;
        }

        .world-quote {
            background-color: rgba(245, 239, 230, 0.5);
            border-left: 3px solid var(--border-strong-color);
            padding: 10px 15px;
            margin: 12px 0;
            font-style: italic;
            color: #5d4037;
            font-size: 0.9em;
        }

        .main-title {
            font-family: var(--title-font);
            font-weight: 700;
            color: var(--title-color);
            text-align: center;
            margin: 0 0 15px;
            font-size: 1.6em;
        }

        .instructions {
            text-align: center;
            margin-bottom: 20px;
            font-size: 0.9em;
            color: #6a514d;
            line-height: 1.5;
        }

        /* ÊåâÈíÆÊ†∑ÂºèÔºàÂº∫ÂåñÁßªÂä®Á´ØËß¶Êë∏ÂèçÈ¶àÔºâ */
        .btn {
            font-family: var(--body-font);
            font-weight: 500;
            font-size: 1em;
            padding: 14px 25px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.15s ease;
            border: none;
            text-align: center;
            width: 100%;
            margin: 5px 0;
        }

        .btn-primary {
            background-color: var(--item-bg-selected-color);
            color: var(--title-color);
            border: 1px solid var(--border-strong-color);
        }

        .btn-secondary {
            background-color: var(--item-bg-color);
            color: var(--title-color);
            border: 1px solid var(--border-color);
        }

        .btn:active {
            transform: scale(0.98); /* ÁÇπÂáªÁº©ÊîæÂèçÈ¶à */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        /* ÈÄâÈ°πÂàóË°®ÔºàËß¶Êë∏‰ºòÂåñÔºâ */
        .option-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 0;
            padding: 0;
            list-style: none;
        }

        .option-item {
            background: var(--item-bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px 15px 15px 45px;
            position: relative;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .option-item::before {
            content: 'üìú';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
            opacity: 0.7;
        }

        .option-item.selected {
            background-color: var(--item-bg-selected-color);
            border-color: var(--title-color);
            color: var(--title-color);
            font-weight: 500;
        }

        .option-item.selected::after {
            content: '‚úì';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
        }

        .card {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: rgba(253, 250, 245, 0.95);
            padding: 15px;
            margin: 20px 0;
        }

        /* Ë°®ÂçïÊ†∑Âºè */
        .form-group {
            margin-bottom: 18px;
        }

        .form-label {
            display: block;
            font-weight: 500;
            color: var(--title-color);
            margin-bottom: 8px;
            font-size: 1em;
        }

        .form-input {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: var(--body-font);
            font-size: 1em;
            background-color: var(--item-bg-color);
            color: var(--text-color);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--border-strong-color);
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            flex: 1 1 calc(50% - 4px);
            min-width: 140px;
            font-size: 0.9em;
        }

        .radio-item input {
            accent-color: var(--border-strong-color);
            transform: scale(1.2);
        }

        .radio-item.selected {
            background-color: var(--item-bg-selected-color);
            border-color: var(--title-color);
        }

        /* Â±ûÊÄßÊªëÂùó */
        .stats-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-name {
            font-weight: 500;
        }

        .stat-value {
            color: var(--border-strong-color);
            font-weight: 700;
        }

        .stat-slider {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background-color: var(--border-color);
            accent-color: var(--border-strong-color);
            cursor: pointer;
        }

        .stat-desc {
            font-siz            padding: 15px;
            min-height: 100vh;
            background-image: url('data:image/png;base64,iVBORw0KUAhEUgAAADIAAAAyCAMAAAAp4XiGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAADdAAAA3QFwU6IHAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAABbUExURQAAAP////f3+Pj4+fX19vb2+PT09Pj4+d/f4O/v8fPz9PX19vf3+Pn5+fb29/Hx8/T09fX19fX19////97e4Ojo6fHx8/Ly8/X19fX19fDw8vX19e/v8fj4+Pf3+AAAADSAx5YAAAAfdFJOUwAAAAAAAAAAAAAAAMA/z/BAgMBAwBCgwFBPT1BQUD9/Py8vRkQoCgAAAQBJREFUSMftlVuSgyAQhUNtZRAScQExPff9H3CBQsEMZDDpOf2EM8P9NZnZzI5KEfEPMGOIsIApFgAAFDtAAmWiIAMAWGDVQDQAAkYMm9RhpJbrBLhZ1Z6yGvWq2xWA92i6ZXRtC50EAADg0n8ErvDY2esxAEBW96Fz0Npq7H0AGBzh6MrAgAAgAEEyNiyL00mDgCsvt9jX6gAEEPg2pS8HAABgB2b0ONnuaR4AQDG9OQCAfQD8XRsBACJmk/+1WwUALg7A8IUBjgh0JGBgAJY2YB+S/VB9aKjpx5EDP5HAPk7Jm4tJgLeJ3I0LANT3/k7K/r5Q/AAAFYxxfYq1LAAAAABJRU5ErkJggg==');
            background-repeat: repeat;
            background-size: auto;
        }

        .selector-scroll {
            border: 2px solid var(--border-strong-color);
            border-radius: 12px;
            padding: 20px 15px;
            background-color: var(--container-bg-color);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
        }

        .page-super-title {
            font-family: var(--title-font);
            font-weight: 700;
            text-align: center;
            font-size: 2em;
            color: var(--title-color);
            margin: 10px 0 15px;
            letter-spacing: 1px;
        }

        .ornamental-divider {
            border: 0;
            height: 1px;
            background-color: var(--border-color);
            position: relative;
            margin: 20px auto;
            width: 70%;
        }

        .ornamental-divider::after {
            content: '‚ùñ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--container-bg-color);
            padding: 0 12px;
            color: var(--title-color);
            font-size: 1.4em;
            line-height: 1;
        }

        .info-panel {
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            background-color: var(--item-bg-color);
        }

        .info-panel > summary {
            font-family: var(--title-font);
            font-weight: 700;
            font-size: 1em;
            color: var(--title-color);
            background-color: var(--item-bg-selected-color);
            padding: 12px 15px;
            cursor: pointer;
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .arrow-toggle {
            font-size: 0.9em;
        }

        .info-content {
            padding: 15px;
            line-height: 1.6;
            font-size: 0.95em;
        }

        .info-content h3 {
            font-family: var(--title-font);
            color: var(--title-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 6px;
            margin: 15px 0 10px;
            font-size: 1.2em;
        }

        .world-quote {
            background-color: rgba(245, 239, 230, 0.5);
            border-left: 3px solid var(--border-strong-color);
            padding: 10px 15px;
            margin: 12px 0;
            font-style: italic;
            color: #5d4037;
            font-size: 0.9em;
        }

        .main-title {
            font-family: var(--title-font);
            font-weight: 700;
            color: var(--title-color);
            text-align: center;
            margin: 0 0 15px;
            font-size: 1.6em;
        }

        .instructions {
            text-align: center;
            margin-bottom: 20px;
            font-size: 0.9em;
            color: #6a514d;
            line-height: 1.5;
        }

        /* ÊåâÈíÆÊ†∑ÂºèÔºàÁßªÂä®Á´ØËß¶Êë∏‰ºòÂåñÔºâ */
        .recheck-button, .submit-button {
            font-family: var(--body-font);
            font-weight: 500;
            font-size: 1em;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .recheck-button {
            color: var(--title-color);
            background-color: var(--item-bg-color);
            border: 1px solid var(--border-color);
            margin: 0 5px;
            min-width: 120px;
        }

        .recheck-button:hover, .recheck-button:active {
            background-color: var(--item-bg-hover-color);
            border-color: var(--border-strong-color);
            transform: scale(1.03);
        }

        .submit-button {
            font-family: var(--title-font);
            color: var(--title-color);
            background-color: var(--item-bg-selected-color);
            border: 1px solid var(--border-strong-color);
            width: 100%;
            margin-top: 15px;
            padding: 14px;
            font-size: 1.05em;
        }

        .submit-button:hover, .submit-button:active {
            background-color: #c9bba9;
            transform: scale(1.02);
        }

        .step-footer {
            text-align: center;
            margin-top: 25px;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* ÈÄâÈ°πÂàóË°®ÔºàÁßªÂä®Á´ØËß¶Êë∏‰ºòÂåñÔºâ */
        .scenario-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            padding: 0;
            margin: 0;
            list-style: none;
        }

        .scenario-option {
            font: inherit;
            color: inherit;
            background: var(--item-bg-color);
            border: 1px solid var(--border-color);
            text-align: left;
            width: 100%;
            padding: 15px 15px 15px 45px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            font-size: 1em;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .scenario-option::before {
            content: 'üìú';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
            opacity: 0.7;
        }

        .scenario-option:hover, .scenario-option:active {
            background-color: var(--item-bg-hover-color);
            border-color: var(--border-strong-color);
            transform: translateX(3px);
        }

        .scenario-option.selected {
            background-color: var(--item-bg-selected-color);
            border-color: var(--title-color);
            color: var(--title-color);
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .scenario-option.selected::after {
            content: '‚úì';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: var(--title-color);
        }

        .control-panel-container {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: rgba(253, 250, 245, 0.95);
            padding: 15px;
            margin: 20px 0;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.05);
        }

        /* Ë°®ÂçïÊ†∑ÂºèÔºàÁßªÂä®Á´ØÈÄÇÈÖçÔºâ */
        .custom-char-form {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-weight: 500;
            color: var(--title-color);
            font-size: 1em;
        }

        .form-input {
            padding: 14px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: var(--body-font);
            font-size: 1em;
            background-color: var(--item-bg-color);
            color: var(--text-color);
            width: 100%;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--border-strong-color);
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            g            font-family: var(--body-font);
            font-weight: 500;
            font-size: 1em;
            color: #721c24;
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 8px 25px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        .clear-cache-button:hover {
            background-color: #f1b0b7;
            border-color: #dc3545;
        }

        .env-check-container {
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: rgba(253, 250, 245, 0.9);
            padding: 10px 20px;
            margin: 25px 0;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
        }

        .env-check-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 5px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .env-check-item:not(:last-child) {
            border-bottom: 1px dashed var(--border-color);
        }

        .env-check-label {
            display: flex;
            align-items: center;
            font-weight: 500;
            color: var(--title-color);
        }

        .env-check-label .icon {
            font-size: 1.4em;
            margin-right: 12px;
            opacity: 0.8;
            line-height: 1;
        }

        .env-check-details {
            display: flex;
            align-items: center;
            font-size: 0.9em;
            gap: 15px;
            text-align: right;
        }

        .env-check-details strong {
            font-weight: 700;
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            min-width: 55px;
            text-align: center;
            border: 1px solid transparent;
        }

        .status-ok {
            background-color: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }

        .status-warn {
            background-color: #fff3cd;
            color: #856404;
            border-color: #ffeeba;
        }

        .status-error {
            background-color: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }

        .status-unknown {
            background-color: #e2e3e5;
            color: #383d41;
            border-color: #d6d8db;
        }

        .locked-module {
            opacity: 0.5;
            pointer-events: none;
            filter: grayscale(100%);
            user-select: none;
            transition: all 0.3s ease;
        }

        :root {
            --bg-color: #f5efe6;
            --text-color: #4a3b31;
            --border-color: #d3c5b3;
            --border-strong-color: #785a4e;
            --title-color: #5d4037;
            --link-color: #8c6d62;
            --item-bg-color: rgba(253, 250, 245, 0.9);
            --item-bg-hover-color: #e8ddcb;
            --item-bg-selected-color: #d7c8b6;
            --pre-bg-color: rgba(215, 200, 182, 0.3);
            --container-bg-color: rgba(240, 230, 210, 0.9);
            --title-font: 'Cinzel', serif;
            --body-font: 'Noto Serif SC', serif;
        }

        body {
            font-family: var(--body-font);
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            background-image: url('data:image/png;base64,iVBORw0KUAhEUgAAADIAAAAyCAMAAAAp4XiGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAADdAAAA3QFwU6IHAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAABbUExURQAAAP////f3+Pj4+fX19vb2+PT09Pj4+d/f4O/v8fPz9PX19vf3+Pn5+fb29/Hx8/T09fX19fX19////97e4Ojo6fHx8/Ly8/X19fX19fDw8vX19e/v8fj4+Pf3+AAAADSAx5YAAAAfdFJOUwAAAAAAAAAAAAAAAMA/z/BAgMBAwBCgwFBPT1BQUD9/Py8vRkQoCgAAAQBJREFUSMftlVuSgyAQhUNtZRAScQExPff9H3CBQsEMZDDpOf2EM8P9NZnZzI5KEfEPMGOIsIApFgAAFDtAAmWiIAMAWGDVQDQAAkYMm9RhpJbrBLhZ1Z6yGvWq2xWA92i6ZXRtC50EAADg0n8ErvDY2esxAEBW96Fz0Npq7H0AGBzh6MrAgAAgAEEyNiyL00mDgCsvt9jX6gAEEPg2pS8HAABgB2b0ONnuaR4AQDG9OQCAfQD8XRsBACJmk/+1WwUALg7A8IUBjgh0JGBgAJY2YB+S/VB9aKjpx5EDP5HAPk7Jm4tJgLeJ3I0LANT3/k7K/r5Q/AAAFYxxfYq1LAAAAABJRU5ErkJggg==');
            background-repeat: repeat;
        }

        .selector-scroll {
            border: 2px solid var(--border-strong-color);
            border-radius: 8px;
            padding: 25px;
            background-color: var(--container-bg-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            max-width: 900px;
            width: 100%;
            margin: auto;
            display: flex;
            flex-direction: column;
        }

        .step-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .step-content.hidden {
            display: none;
        }

        .step-content.fade-out {
            opacity: 0;
            transform: translateY(-10px);
        }

        .step-content.fade-in-start {
            opacity: 0;
            transform: translateY(10px);
        }

        .step-footer {
            text-align: center;
            margin-top: auto;
            padding-top: 20px;
        }

        .page-super-title {
            font-family: var(--title-font);
            font-weight: 700;
            text-align: center;
            font-size: 2.8em;
            color: var(--title-color);
            margin: 10px 0 0 0;
            letter-spacing: 2px;
        }

        .ornamental-divider {
            border: 0;
            height: 1px;
            background-color: var(--border-color);
            position: relative;
            margin: 25px auto 30px auto;
            width: 85%;
        }

        .ornamental-divider::after {
            content: '‚ùñ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--container-bg-color);
            padding: 0 15px;
            color: var(--title-color);
            font-size: 1.6em;
            line-height: 1;
        }

        .info-panel {
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            overflow: hidden;
            background-color: var(--item-bg-color);
        }

        .info-panel > summary {
            font-family: var(--title-font);
            font-weight: 700;
            font-size: 1.1em;
            color: var(--title-color);
            background-color: var(--item-bg-selected-color);
            padding: 12px 20px;
            cursor: pointer;
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }

        .info-panel > summary::-webkit-details-marker {
            display: none;
        }

        .info-panel > summary:hover {
            background-color: #c9bba9;
        }

        .arrow-toggle {
            font-size: 0.8em;
            transition: transform 0.3s ease-out;
            display: inline-block;
        }

        .info-panel[open] > summary .arrow-toggle {
            transform: rotate(-90deg);
        }

        .info-content {
            padding: 15px 25px 25px 25px;
            line-height: 1.7;
        }

        .info-content h3 {
            font-family: var(--title-font);
            color: var(--title-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 8px;
            margin: 25px 0 15px 0;
            font-size: 1.4em;
        }

        .info-content h3:first-child {
            margin-top: 5px;
        }

        .info-content p,
        .info-content ul {
            margin: 0 0 1em 0;
        }

        .info-content ul {
            list-style: none;
            padding-left: 5px;
        }

        .info-content li {
            padding-left: 20px;
            position: relative;
        }

        .info-content li::before {
            content: '¬ª';
            position: absolute;
            left: 0;
            top: 0;
            color: var(--border-strong-color);
            font-weight: bold;
        }

        .main-title {
            font-family: var(--title-font);
            font-weight: 700;
            color: var(--title-color);
            text-align: center;
            margin: 0 0 10px 0;
            font-size: 2.2em;
        }

        .instructions {
            text-align: center;
            margin-bottom: 25px;
            font-size: 0.95em;
            color: #6a514d;
        }

        .scenario-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            padding: 0;
            margin: 0;
            list-style: none;
        }

        .scenario-option {
            font: inherit;
            color: inherit;
            background: var(--item-bg-color);
            border: 1px solid var(--border-color);
            text-align: left;
            width: 100%;
            padding: 12px 15px 12px 40px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            position: relative;
            font-size: 1.05em;
        }

        .scenario-option::before {
            content: 'üìú';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.1em;
            opacity: 0.7;
            transition: all 0.2s ease-in-out;
        }

        .scenario-option:hover {
            background-color: var(--item-bg-hover-color);
            border-color: var(--border-strong-color);
            transform: translateX(5px);
        }

        .scenario-option:hover::before {
            opacity: 1;
            transform: translateY(-50%) rotate(-5deg);
        }

        .scenario-option.selected {
            background-color: var(--item-bg-selected-color);
            border-color: var(--title-color);
            color: var(--title-color);
            font-weight: 500;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .scenario-option.selected::after {
            content: '‚úì';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: var(--title-color);
        }

        .control-panel-container {
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: rgba(253, 250, 245, 0.9);
            padding: 15px 20px;
            margin: 25px 0;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group:last-child {
            margin-bottom: 5px;
        }

        .control-group-title {
            font-weight: 500;
            color: var(--title-color);
            margin: 0 0 12px 0;
            padding-bottom: 8px;
            border-bottom: 1px dashed var(--border-color);
            font-size: 1.1em;
        }

        .control-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .control-item-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1 0 140px;
            max-width: 280px;
        }

        .control-button {
            font-family: var(--body-font);
            font-size: 0.95em;
            padding: 8px 10px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            background-color: var(--item-bg-color);
            color: var(--text-color);
            opacity: 0.8;
            width: 100%;
        }

        .button-desc {
            font-size: 0.8em;
            color: #6a514d;
            margin-top: 6px;
            text-align: center;
            opacity: 0.8;
            line-height: 1.3;
            min-height: 1em;
        }

        .control-button:hover {
            background-color: var(--item-bg-hover-color);
            border-color: var(--border-strong-color);
            opacity: 1;
        }

        .control-button.disabled {
            cursor: not-allowed;
            opacity: 0.5;
            background-color: #e0e0e0;
        }

        .control-button.selected {
            background-color: var(--item-bg-selected-color);
            border-color: var(--title-color);
            color: var(--title-color);
            font-weight: 500;
            opacity: 1;
        }

        /* Ëá™ÂÆö‰πâËßíËâ≤Ë°®ÂçïÊ†∑Âºè */
        .custom-char-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-weight: 500;
            color: var(--title-color);
            font-size: 1.05em;
        }

        .form-input {
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-family: var(--body-font);
            font-size: 1em;
            background-color: var(--item-bg-color);
            color: var(--text-color);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--border-strong-color);
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .radio-option:hover {
            background-color: var(--item-bg-hover-color);
            border-color: var(--border-strong-color);
        }

        .radio-option input {
            accent-color: var(--border-strong-color);
        }

        .radio-option.selected {
            background-color: var(--item-bg-selected-color);
            border-color: var(--title-color);
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .stat-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-name {
            font-weight: 500;
        }

        .stat-value {
            color: var(--border-strong-color);
            font-weight: 700;
        }

        .stat-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background-color: var(--border-color);
            accent-color: var(--border-strong-color);
            cursor: pointer;
        }

        .stat-desc {
            font-size: 0.8em;
            color: #6a514d;
            margin-top: 3px;
        }

        .submit-button {
            font-family: var(--title-font);
            font-size: 1.1em;
            padding: 12px 30px;
            border: 1px solid var(--border-strong-color);
            border-radius: 6px;
            background-color: var(--item-bg-selected-color);
            color: var(--title-color);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 10px;
        }

        .submit-button:hover {
            background-color: #c9bba9;
            transform: translateY(-2px);
        }

        /* Ëá™ÂÆö‰πâÂ°´Á©∫Ê°ÜÊ†∑Âºè */
        .custom-input-group {
            margin-top: 10px;
            display: none;
        }

        .custom-input-group.active {
            display: block;
        }

        /* ÂâßÊÉÖÊñáÊú¨ÂüüÊ†∑Âºè */
        .scenario-textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-family: var(--body-font);
            font-size: 1em;
            background-color: var(--item-bg-color);
            color: var(--text-color);
            resize: vertical;
            margin-top: 10px;
        }

        @media screen and (max-width: 600px) {
            body {
                padding: 10px;
            }

            .selector-scroll {
                padding: 15px;
            }

            .page-super-title {
                font-size: 2em;
            }

            .main-title {
                font-size: 1.8em;
            }

            .scenario-option {
                padding: 10px 15px 10px 35px;
                font-size: 1em;
            }

            .info-panel > summary {
                padding: 10px 15px;
            }

            .info-content {
                padding: 15px;
            }

            .control-item-wrapper {
                flex-basis: 100%;
                max-width: 100%;
            }

            .stats-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="selector-scroll">
        <h1 class="page-super-title">Ê±âÊú´Á∫¢È¢úÂΩï</h1>
        <hr class="ornamental-divider" />

        <details class="info-panel">
            <summary>
                <span>Ê±âÊú´‰π±‰∏ñËÉåÊôØ</span>
                <span class="arrow-toggle">‚óÄ</span>
            </summary>
            <div class="info-content">
                <h3>Âª∫ÂÆâÂπ¥Èó¥¬∑‰πùÂ∑ûÊùøËç°</h3>
                <p>
                    ‰∏úÊ±âÊú´Âπ¥ÔºåÁÅµÂ∏ùÊòèÂ∫∏ÔºåÈªÑÂ∑æËúÇËµ∑ÔºåËë£Âçì‰π±ÊîøÔºåÁæ§ÈõÑÂâ≤ÊçÆ„ÄÇÂ§©‰∏ãÂ§ß‰π±‰πãÈôÖÔºåÂ•≥Â≠ê‰∫¶ÊúâÂà´Ê†∑‰∫∫Áîü‚Äî‚ÄîÂèØ‰∏∫‰∫∫Â¶ªÁõ∏Â§´ÊïôÂ≠êÔºåÂèØÂä©Â§´ÂêõÁêÜÊîøÊñ≠‰∫ãÔºåÂèØ‰∫é‰π±‰∏ñ‰∏≠ÂùöÂÆàÂÆ∂ÊóèÔºå‰∫¶ÂèØÂá≠Â∑±Ë∫´ÊâçÊô∫Á´ãË∂≥‰∫é‰∏ñ„ÄÇ
                </p>
                <div class="world-quote">‚ÄúÂ§©‰∏ãÂ§ßÂäøÔºåÂàÜ‰πÖÂøÖÂêàÔºåÂêà‰πÖÂøÖÂàÜ„ÄÇ‚Äù</div>
                <p>
                    ËøôÈáåÊ≤°ÊúâÈ≠îÊ≥ïÁ•ûËøπÔºåÂè™ÊúâÂàÄÂÖâÂâëÂΩ±‰∏é‰∫∫ÂøÉÂçöÂºàÔºõÊ≤°ÊúâÂ±ÇÁ∫ßÊ°éÊ¢èÔºåÂè™ÈúÄÈÅµ‰ªéÊú¨ÂøÉÔºåÂú®Ëøô‰π±‰∏ñ‰πã‰∏≠ÔºåËµ∞Âá∫Â±û‰∫é‰Ω†ÁöÑÁ∫¢È¢ú‰πãË∑Ø„ÄÇ
                </p>
            </div>
        </details>

        <!-- Ê≠•È™§1ÔºöÂºÄÂú∫ÂºïÂØº -->
        <div id="step-1" class="step-content">
            <h2 class="main-title">ÂºÄÂêØ‰Ω†ÁöÑÊ±âÊú´‰∫∫Áîü</h2>
            <p class="instructions">ÈÄâÊã©‰Ω†ÊÉ≥Ë¶ÅÁöÑÂºÄÂ±ÄÊñπÂºèÔºåÊàñÁõ¥Êé•Ëá™ÂÆö‰πâ‰∏ìÂ±ûËßíËâ≤</p>
            <div class="control-panel-container">
                <ul class="scenario-list">
                    <li><button class="scenario-option" data-action="custom">Ëá™ÂÆö‰πâ‰∏ìÂ±ûÁ∫¢È¢úËßíËâ≤</button></li>
                    <li><button class="scenario-option" data-action="preset">ÈÄâÊã©È¢ÑËÆæÂºÄÂ±ÄÂú∫ÊôØ</button></li>
                </ul>
            </div>
            <div class="step-footer">
                <button id="step1-next" class="recheck-button">ËøõÂÖ•‰∏ã‰∏ÄÊ≠•</button>
            </div>
        </div>

        <!-- Ê≠•È™§2ÔºöÈ¢ÑËÆæÂºÄÂ±ÄÂú∫ÊôØ -->
        <div id="step-2" class="step-content hidden">
            <h2 class="main-title">ÈÄâÊã©ÂºÄÂ±ÄÂú∫ÊôØ</h2>
            <p class="instructions">ÊåëÈÄâ‰Ω†ÁöÑËµ∑ÁÇπÔºåÂºÄÂêØÊ±âÊú´ÊóÖÁ®ã</p>
            <div class="control-panel-container">
                <ul class="scenario-list">
                    <li><button class="scenario-option" data-scene="1">Ê¥õÈò≥Ê∑±ÂÆÖ¬∑ËØ∏‰æØ‰πãÂ¶ª</button></li>
                    <li><button class="scenario-option" data-scene="2">Ë•ÑÈò≥Âà´Èô¢¬∑ÂêçÂ£´‰πãÂ¶ª</button></li>
                    <li><button class="scenario-option" data-scene="3">Ê±ü‰∏úÊ∞¥‰π°¬∑Â∞ÜÈó®‰πãÂ¶ª</button></li>
                    <li><button class="scenario-option" data-scene="4">Ê∂øÂéøÂÜúÂÆ∂¬∑Âπ≥Ê∞ë‰πãÂ¶ª</button></li>
                    <li><button class="scenario-option" data-scene="5">ÈïøÂÆâÂè§ÈÅì¬∑ÊµÅ‰∫°Ë¥µÂ•≥</button></li>
                    <li><button class="scenario-option" data-scene="6">ÊàêÈÉΩÂ∏Ç‰∫ï¬∑ÂïÜÊà∑‰πãÂ¶ª</button></li>
                </ul>
            </div>
            <div class="step-footer">
                <button id="step2-prev" class="recheck-button">ËøîÂõû‰∏ä‰∏ÄÊ≠•</button>
                <button id="step2-next" class="recheck-button">Á°ÆËÆ§ÂºÄÂ±Ä</button>
            </div>
        </div>

        <!-- Ê≠•È™§3ÔºöËá™ÂÆö‰πâËßíËâ≤ -->
        <div id="step-3" class="step-content hidden">
            <h2 class="main-title">Ëá™ÂÆö‰πâ‰∏ìÂ±ûÁ∫¢È¢ú</h2>
            <p class="instructions">ÂÆåÂñÑ‰Ω†ÁöÑËßíËâ≤‰ø°ÊÅØÔºåÊâìÈÄ†Áã¨‰∏ÄÊó†‰∫åÁöÑÊ±âÊú´‰∫∫Áîü</p>
            <div class="control-panel-container">
                <form id="customCharForm" class="custom-char-form">
                    <!-- Âü∫Á°Ä‰ø°ÊÅØ -->
                    <div class="form-group">
                        <label class="form-label">ÂßìÂêç</label>
                        <input type="text" class="form-input" id="charName" placeholder="ËæìÂÖ•‰Ω†ÁöÑÂßìÂêçÔºàÂ¶ÇÔºöÁîÑÊ∞è„ÄÅËî°Áê∞Ôºâ" required>
                    </div>

                    <!-- Ëá™ÂÆö‰πâË∫´‰ªΩÔºàÂ°´Á©∫ÂºèÔºâ -->
                    <div class="form-group">
                        <label class="form-label">Ë∫´‰ªΩËÉåÊôØÔºàËá™ÂÆö‰πâÔºåË¥¥ÂêàÂè≤ÂÆûÂ•≥ÊÄßËÆæÂÆöÔºâ</label>
                        <input type="text" class="form-input" id="charIdentity" placeholder="ËæìÂÖ•‰Ω†ÁöÑË∫´‰ªΩÔºàÂ¶ÇÔºöÈÉ°ÂÆà‰πãÂ•≥„ÄÅÁª£Âùä‰∏ªÊØç„ÄÅÂåªÈ¶Ü‰º†‰∫∫Ôºâ" required>
                    </div>

                    <!-- Âπ¥ÈæÑ -->
                    <div class="form-group">
                        <label class="form-label">Âπ¥ÈæÑÔºà16-40Â≤ÅÔºåÁ¨¶ÂêàÊ±âÊú´Â•≥ÊÄßÊ¥ªÂä®Âπ¥ÈæÑÔºâ</label>
                        <input type="number" class="form-input" id="charAge" min="16" max="40" value="18" required>
                    </div>

                    <!-- ÈÖçÂÅ∂‰ø°ÊÅØ -->
                    <div class="form-group">
                        <label class="form-label">ÈÖçÂÅ∂ÊÉÖÂÜµÔºàÁ¨¶ÂêàÂè≤ÂÆûËÆæÂÆöÔºâ</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="spouse" value="ËØ∏‰æØÂêçÂ∞Ü" checked> ÈÖçÂÅ∂‰∏∫ËØ∏‰æØ/ÂêçÂ∞ÜÔºàÂ¶ÇÊõπÊìç„ÄÅÂàòÂ§áÈ∫æ‰∏ãÔºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="spouse" value="ÂêçÂ£´Êñá‰∫∫"> ÈÖçÂÅ∂‰∏∫ÂêçÂ£´/Êñá‰∫∫ÔºàÂ¶ÇËØ∏Ëëõ‰∫Æ„ÄÅËî°ÈÇïÔºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="spouse" value="Âú∞ÊñπÂÆòÂêè"> ÈÖçÂÅ∂‰∏∫Âú∞ÊñπÂÆòÂêèÔºàÂéø‰ª§„ÄÅÈÉ°ÂÆàÁ≠âÔºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="spouse" value="Âπ≥Ê∞ëÂïÜÊà∑"> ÈÖçÂÅ∂‰∏∫Âπ≥Ê∞ë/ÂïÜÊà∑ÔºàÂÜúËÄï„ÄÅÁªèÂïÜÔºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="spouse" value="ÊöÇÊó†ÈÖçÂÅ∂"> ÊöÇÊó†ÈÖçÂÅ∂Ôºà‰π±‰∏ñ‰∏≠ÂØªÊ±ÇÂΩíÂÆøÔºâ
                            </label>
                        </div>
                    </div>

                    <!-- ÂÆ∂ÊóèËÉåÊôØ -->
                    <div class="form-group">
                        <label class="form-label">ÂÆ∂ÊóèËÉåÊôØ</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="family" value="ÂêçÈó®ÊúõÊóè" checked> ÂêçÈó®ÊúõÊóèÔºàÂ¶ÇÁîÑÊ∞è„ÄÅËî°Ê∞èÔºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="family" value="‰π¶È¶ôÈó®Á¨¨"> ‰π¶È¶ôÈó®Á¨¨Ôºà‰∏ñ‰ª£Ê≤ªÂ≠¶ÔºåÊñáÈááÊñêÁÑ∂Ôºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="family" value="Ê≠¶Â∞Ü‰∏ñÂÆ∂"> Ê≠¶Â∞Ü‰∏ñÂÆ∂Ôºà‰∏ñ‰ª£‰ªéÂÜõÔºåÂø†Âãá‰º†ÂÆ∂Ôºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="family" value="ÊôÆÈÄöÂπ≥Ê∞ë"> ÊôÆÈÄöÂπ≥Ê∞ëÔºàËÄïËØª‰º†ÂÆ∂ÔºåÂÆâÁ®≥Â∫¶Êó•Ôºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="family" value="Ë¥•ËêΩÂÆ∂Êóè"> Ë¥•ËêΩÂÆ∂ÊóèÔºàÊõæ‰∏∫ÂêçÈó®ÔºåÂêéÈÅ≠ÂèòÊïÖÔºâ
                            </label>
                        </div>
                    </div>

                    <!-- Ê†∏ÂøÉÂ±ûÊÄß -->
                    <div class="form-group">
                        <label class="form-label">Ê†∏ÂøÉÂ±ûÊÄßÔºàÊØèÈ°πÂèØÂàÜÈÖç1-10ÁÇπÔºåÊÄªÂàÜ35ÁÇπÔºâ</label>
                        <div class="stats-container">
                            <!-- Ê≠¶Âäõ -->
                            <div class="stat-item">
                                <div class="stat-label">
                                    <span class="stat-name">Ê≠¶Âäõ</span>
                                    <span class="stat-value" id="forceValue">5</span>
                                </div>
                                <input type="range" class="stat-slider" id="forceSlider" min="1" max="10" value="5">
                                <p class="stat-desc">ËøëÊàòËÉΩÂäõ„ÄÅÈ©¨ÊúØÁÆ≠ÊúØÔºàÂ¶ÇÁ•ùËûçÂ§´‰∫∫Ôºâ</p>
                            </div>
                            <!-- ‰ΩìÈ≠Ñ -->
                            <div class="stat-item">
                                <div class="stat-label">
                                    <span class="stat-name">‰ΩìÈ≠Ñ</span>
                                    <span class="stat-value" id="bodyValue">7</span>
                                </div>
                                <input type="range" class="stat-slider" id="bodySlider" min="1" max="10" value="7">
                                <p class="stat-desc">Ë∫´‰ΩìÁ¥†Ë¥®„ÄÅÊäóÁñæËÉΩÂäõÔºà‰π±‰∏ñÁîüÂ≠òÂÖ≥ÈîÆÔºâ</p>
                            </div>
                            <!-- Êô∫Ë∞ã -->
                            <div class="stat-item">
                                <div class="stat-label">
                                    <span class="stat-name">Êô∫Ë∞ã</span>
                                    <span class="stat-value" id="wisdomValue">7</span>
                                </div>
                                <input type="range" class="stat-slider" id="wisdomSlider" min="1" max="10" value="7">
                                <p class="stat-desc">Ë∞ãÁï•ËßÑÂàí„ÄÅÂ∫îÂèòËÉΩÂäõÔºàÂ¶ÇÈªÑÊúàËã±Ôºâ</p>
                            </div>
                            <!-- È¢ÜÂØº -->
                            <div class="stat-item">
                                <div class="stat-label">
                                    <span class="stat-name">È¢ÜÂØº</span>
                                    <span class="stat-value" id="leadValue">5</span>
                                </div>
                                <input type="range" class="stat-slider" id="leadSlider" min="1" max="10" value="5">
                                <p class="stat-desc">ÁªüÁ≠πÂçèË∞É„ÄÅ‰∫∫ÂøÉÊääÊéßÔºàÁÆ°ÁêÜÂÆ∂‰∫ã/ÈÉ®Êõ≤Ôºâ</p>
                            </div>
                            <!-- È≠ÖÂäõ -->
                            <div class="stat-item">
                                <div class="stat-label">
                                    <span class="stat-name">È≠ÖÂäõ</span>
                                    <span class="stat-value" id="charmValue">11</span>
                                </div>
                                <input type="range" class="stat-slider" id="charmSlider" min="1" max="10" value="11">
                                <p class="stat-desc">ÂÆπË≤åÊ∞îË¥®„ÄÅ‰∫∫ÈôÖÂê∏ÂºïÂäõÔºàÂ¶ÇË≤ÇËùâÔºâ</p>
                            </div>
                        </div>
                        <p class="stat-desc" style="margin-top: 10px; text-align: center;">ÂΩìÂâçÊÄªÂàÜÔºö<span id="totalStats">35</span>ÔºàÂ∑≤Ëææ‰∏äÈôêÔºâ</p>
                    </div>

                    <!-- ÂàùÂßãÂú∞ÁÇπÔºàÈÄâÊã©+Â°´Á©∫Ôºâ -->
                    <div class="form-group">
                        <label class="form-label">ÂàùÂßãÂú∞ÁÇπ</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="location" value="Ê¥õÈò≥" checked> Ê¥õÈò≥Ôºà‰∏úÊ±âÈÉΩÂüéÔºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="location" value="Ë•ÑÈò≥"> Ë•ÑÈò≥ÔºàËçÜÂ∑ûË¶ÅÂú∞Ôºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="location" value="Ê±ü‰∏ú"> Ê±ü‰∏úÔºàÂê¥Âú∞Ê†∏ÂøÉÔºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="location" value="ÊàêÈÉΩ"> ÊàêÈÉΩÔºàÁõäÂ∑ûÈ¶ñÂ∫úÔºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="location" value="Ê∂øÂéø"> Ê∂øÂéøÔºàÂàòÂ§áÊïÖÈáåÔºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="location" value="ÈïøÂÆâ"> ÈïøÂÆâÔºàÂè§ÈÉΩÈáçÂú∞Ôºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="location" value="Ëá™ÂÆö‰πâ"> Ëá™ÂÆö‰πâÂú∞ÁÇπ
                            </label>
                        </div>
                        <div class="custom-input-group" id="customLocationGroup">
                            <input type="text" class="form-input" id="customLocation" placeholder="ËæìÂÖ•Ëá™ÂÆö‰πâÂú∞ÁÇπÔºàÂ¶ÇÔºöÂ∫êÊ±ü„ÄÅÊ±â‰∏≠„ÄÅÊ≠¶ÈôµÔºâ">
                        </div>
                    </div>

                    <!-- ‰∫∫ÁîüÁõÆÊ†áÔºàÈÄâÊã©+Â°´Á©∫Ôºâ -->
                    <div class="form-group">
                        <label class="form-label">‰∫∫ÁîüÁõÆÊ†áÔºà‰∏çÂ±ÄÈôê‰∫éÈú∏‰∏öÔºâ</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="goal" value="Áõ∏Â§´ÊïôÂ≠ê" checked> Áõ∏Â§´ÊïôÂ≠êÔºàÂÆâÁ®≥Â∫¶Êó•Ôºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="goal" value="ËæÖ‰ΩêÂ§´Âêõ"> ËæÖ‰ΩêÂ§´ÂêõÔºàÊàêÂ∞±Â§ß‰∏öÔºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="goal" value="ÂÆàÊä§ÂÆ∂Êóè"> ÂÆàÊä§ÂÆ∂ÊóèÔºà‰π±‰∏ñ‰øùÂÖ®Êóè‰∫∫Ôºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="goal" value="Êâ¨ÂêçÁ´ã‰∏á"> Êâ¨ÂêçÁ´ã‰∏áÔºàÂá≠Â∑±Ë∫´ÊâçÊô∫Á´ãË∂≥Ôºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="goal" value="‰π±‰∏ñÊ±ÇÁîü"> ‰π±‰∏ñÊ±ÇÁîüÔºàÂÆâÁ®≥Â∫¶ËøáÊàò‰π±Ôºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="goal" value="Ëá™Áî±ÊºÇÊ≥ä"> Ëá™Áî±ÊºÇÊ≥äÔºàÊ∏∏ÂéÜ‰πùÂ∑ûÂ§ßÂú∞Ôºâ
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="goal" value="Ëá™ÂÆö‰πâ"> Ëá™ÂÆö‰πâÁõÆÊ†á
                            </label>
                        </div>
                        <div class="custom-input-group" id="customGoalGroup">
                            <input type="text" class="form-input" id="customGoal" placeholder="ËæìÂÖ•Ëá™ÂÆö‰πâ‰∫∫ÁîüÁõÆÊ†áÔºàÂ¶ÇÔºö‰º†ÊâøÂåªÊúØ„ÄÅÂºÄËÆæÁªáÂùä„ÄÅÂØªÂõû‰∫≤‰∫∫Ôºâ">
                        </div>
                    </div>

                    <button type="submit" class="submit-button">‰∏ã‰∏ÄÊ≠•ÔºöÈÄâÊã©ÂàùÂßãÂâßÊÉÖ</button>
                </form>
            </div>
            <div class="step-footer">
                <button id="step3-prev" class="recheck-button">ËøîÂõû‰∏ä‰∏ÄÊ≠•</button>
            </div>
        </div>

        <!-- Ê≠•È™§4ÔºöÂàùÂßãÂâßÊÉÖÈÄâÊã© -->
        <div id="step-4" class="step-content hidden">
            <h2 class="main-title">ÈÄâÊã©ÂàùÂßãÂâßÊÉÖ</h2>
            <p class="instructions">ÊåëÈÄâ‰Ω†ÁöÑÂºÄÂ±ÄÂâßÊÉÖÔºåÊàñËá™ÂÆö‰πâ‰∏ìÂ±ûÂºÄÁØá</p>
            <div class="control-panel-container">
                <ul class="scenario-list">
                    <li><button class="scenario-option" data-plot="1">Ê∑±ÂÆÖÂ§úËØù¬∑Â§´ÂêõÊ¨≤Ëµ∑ÂÖµËÆ®Ë¥ºÔºåÈóÆ‰Ω†ÊÑèËßÅ</button></li>
                    <li><button class="scenario-option" data-plot="2">‰π±‰∏ñÊµÅ‰∫°¬∑ÂÆ∂ÊóèÈÅ≠ÂÖµÁ•∏Ôºå‰Ω†Â∏¶ÁùÄÊóè‰∫∫ÂØªÊâæÂÆâË∫´‰πãÂ§Ñ</button></li>
                    <li><button class="scenario-option" data-plot="3">ÂåªÈ¶ÜÊïë‰∫∫¬∑Êàò‰π±‰∏≠ÁòüÁñ´Ê®™Ë°åÔºå‰Ω†Âá≠ÂåªÊúØÊïëÊ≤ª‰π°ÈÇª</button></li>
                    <li><button class="scenario-option" data-plot="4">Âà´Èô¢ÈÄ¢Âèã¬∑Ê∏∏Â≠¶ÈÄî‰∏≠ÂÅ∂ÈÅáÂêçÂ£´ÔºåÂÖ±ËÆ∫Â§©‰∏ãÂ§ßÂäø</button></li>
                    <li><button class="scenario-option" data-plot="5">ÂïÜÊà∑Âç±Êú∫¬∑Â§´ÂêõÁªèÂïÜÈÅáÂä´Ôºå‰Ω†Âá∫Èù¢ÂåñËß£Âõ∞Â¢É</button></li>
                    <li><button class="scenario-option" data-plot="custom">Ëá™ÂÆö‰πâÂàùÂßãÂâßÊÉÖ</button></li>
                </ul>
                <div id="customPlotGroup" class="custom-input-group">
                    <label class="form-label" style="margin-top: 20px;">Ëá™ÂÆö‰πâÂâßÊÉÖÔºàË¥¥Âêà‰Ω†ÁöÑËßíËâ≤ËÆæÂÆöÔºåÁÆÄËø∞ÂºÄÁØáÂú∫ÊôØÔºâ</label>
                    <textarea class="scenario-textarea" id="customPlot" placeholder="‰æãÔºö‰Ω†ÊòØÂ∫êÊ±üÂë®Ê∞è‰πãÂ•≥ÔºåÂ´Å‰∏éÂ≠ôÁ≠ñ‰∏∫Â¶ªÔºå‰ªäÊó•Â≠ôÁ≠ñ‰ªéÊ±ü‰∏úÂΩíÊù•ÔºåÂëäÁü•‰Ω†Ê¨≤ËÅîÂêàÂë®ÁëúÂõæË∞ãÊ±ü‰∏ú..."></textarea>
                </div>
            </div>
            <div class="step-footer">
                <button id="step4-prev" class="recheck-button">ËøîÂõû‰∏ä‰∏ÄÊ≠•</button>
                <button id="step4-next" class="recheck-button">Á°ÆËÆ§ÂàõÂª∫ËßíËâ≤</button>
            </div>
        </div>

        <!-- Ê≠•È™§5ÔºöÂàõÂª∫ÊàêÂäü -->
        <div id="step-5" class="step-content hidden">
            <h2 class="main-title">ËßíËâ≤ÂàõÂª∫ÊàêÂäüÔºÅ</h2>
            <div class="control-panel-container" style="text-align: center; padding: 30px 20px;">
                <div id="charSummary" style="line-height: 2; text-align: left; display: inline-block;">
                    <!-- ËßíËâ≤ÊëòË¶ÅÂ∞ÜÂú®ËøôÈáåÁîüÊàê -->
                </div>
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px dashed var(--border-color);">
                    <h3 style="font-family: var(--title-font); color: var(--title-color); margin-bottom: 10px;">ÂàùÂßãÂâßÊÉÖ</h3>
                    <p id="plotSummary" style="text-align: left; display: inline-block; max-width: 100%;"></p>
                </div>
                <div style="margin-top: 30px;">
                    <button id="startGameBtn" class="submit-button">ÂºÄÂêØÊ±âÊú´Á∫¢È¢ú‰πãÊóÖ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Ê≠•È™§ÂàáÊç¢ÂÖÉÁ¥†
            const step1 = document.getElementById('step-1');
            const step2 = document.getElementById('step-2');
            const step3 = document.getElementById('step-3');
            const step4 = document.getElementById('step-4');
            const step5 = document.getElementById('step-5');

            // Ê≠•È™§ÂàáÊç¢ÊåâÈíÆ
            const step1Next = document.getElementById('step1-next');
            const step2Prev = document.getElementById('step2-prev');
            const step2Next = document.getElementById('step2-next');
            const step3Prev = document.getElementById('step3-prev');
            const step4Prev = document.getElementById('step4-prev');
            const step4Next = document.getElementById('step4-next');
            const startGameBtn = document.getElementById('startGameBtn');

            // Ëá™ÂÆö‰πâËßíËâ≤Ë°®ÂçïÂÖÉÁ¥†
            const customCharForm = document.getElementById('customCharForm');
            const charName = document.getElementById('charName');
            const charIdentity = document.getElementById('charIdentity');
            const charAge = document.getElementById('charAge');
            const statSliders = document.querySelectorAll('.stat-slider');
            const statValues = document.querySelectorAll('.stat-value');
            const totalStats = document.getElementById('totalStats');
            const locationRadios = document.querySelectorAll('input[name="location"]');
            const customLocationGroup = document.getElementById('customLocationGroup');
            const customLocation = document.getElementById('customLocation');
            const goalRadios = document.querySelectorAll('input[name="goal"]');
            const customGoalGroup = document.getElementById('customGoalGroup');
            const customGoal = document.getElementById('customGoal');

            // ÂâßÊÉÖÈÄâÊã©ÂÖÉÁ¥†
            const plotOptions = document.querySelectorAll('.scenario-option[data-plot]');
            const customPlotGroup = document.getElementById('customPlotGroup');
            const customPlot = document.getElementById('customPlot');
            let selectedPlot = null;
            let customCharData = null;

            // È¢ÑËÆæÂú∫ÊôØÈÄâÊã©
            const scenarioOptions = document.querySelectorAll('.scenario-option[data-scene]');
            let selectedScene = null;
            let selectedAction = 'custom'; // ÈªòËÆ§Ëá™ÂÆö‰πâËßíËâ≤

            // Ê≠•È™§ÂàáÊç¢ÂáΩÊï∞
            function switchStep(fromStep, toStep) {
                fromStep.classList.add('fade-out');
                setTimeout(() => {
                    fromStep.classList.add('hidden');
                    fromStep.classList.remove('fade-out');
                    toStep.classList.remove('hidden');
                    toStep.classList.add('fade-in-start');
                    setTimeout(() => {
                        toStep.classList.remove('fade-in-start');
                    }, 10);
                }, 300);
            }

            // ÂàùÂßãÈÄâÊã©ÔºàÊ≠•È™§1Ôºâ
            document.querySelectorAll('.scenario-option[data-action]').forEach(option => {
                option.addEventListener('click', function() {
                    selectedAction = this.dataset.action;
                    document.querySelectorAll('.scenario-option[data-action]').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });

            // Ê≠•È™§1 -> Ê≠•È™§2/3
            step1Next.addEventListener('click', () => {
                if (selectedAction === 'preset') {
                    switchStep(step1, step2);
                } else {
                    switchStep(step1, step3);
                }
            });

            // Ê≠•È™§2 -> Ê≠•È™§1
            step2Prev.addEventListener('click', () => {
                switchStep(step2, step1);
                selectedScene = null;
                scenarioOptions.forEach(opt => opt.classList.remove('selected'));
            });

            // Ê≠•È™§2 ÈÄâÊã©Âú∫ÊôØ
            scenarioOptions.forEach(option => {
                option.addEventListener('click', function() {
                    selectedScene = this.dataset.scene;
                    scenarioOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });

            // Ê≠•È™§2 -> Ê≠•È™§4ÔºàÈ¢ÑËÆæÂú∫ÊôØÁõ¥Êé•Ë∑≥ËΩ¨ÂâßÊÉÖÈÄâÊã©Ôºâ
            step2Next.addEventListener('click', () => {
                if (!selectedScene) {
                    alert('ËØ∑ÈÄâÊã©‰∏Ä‰∏™ÂºÄÂ±ÄÂú∫ÊôØ');
                    return;
                }

                // Ê†πÊçÆÂú∫ÊôØÁîüÊàêÈ¢ÑËÆæËßíËâ≤
                const sceneMap = {
                    '1': {
                        name: 'ÁîÑÊ∞è',
                        identity: 'ËØ∏‰æØ‰πãÂ¶ª',
                        age: 20,
                        spouse: 'ËØ∏‰æØÂêçÂ∞Ü',
                        family: 'ÂêçÈó®ÊúõÊóè',
                        location: 'Ê¥õÈò≥',
                        goal: 'ËæÖ‰ΩêÂ§´Âêõ',
                        stats: { force: 4, body: 6, wisdom: 8, lead: 6, charm: 11 }
                    },
                    '2': {
                        name: 'Ëî°Áê∞',
                        identity: 'ÂêçÂ£´‰πãÂ¶ª',
                        age: 19,
                        spouse: 'ÂêçÂ£´Êñá‰∫∫',
                        family: '‰π¶È¶ôÈó®Á¨¨',
                        location: 'Ë•ÑÈò≥',
                        goal: 'Êâ¨ÂêçÁ´ã‰∏á',
                        stats: { force: 3, body: 5, wisdom: 9, lead: 4, charm: 10 }
                    },
                    '3': {
                        name: 'Âê¥Ëãã',
                        identity: 'Â∞ÜÈó®‰πãÂ¶ª',
                        age: 22,
                        spouse: 'ËØ∏‰æØÂêçÂ∞Ü',
                        family: 'Ê≠¶Â∞Ü‰∏ñÂÆ∂',
                        location: 'Ê±ü‰∏ú',
                        goal: 'ÂÆàÊä§ÂÆ∂Êóè',
                        stats: { force: 7, body: 8, wisdom: 6, lead: 7, charm: 7 }
                    },
                    '4': {
                        name: 'ÁéãÊ∞è',
                        identity: 'Âπ≥Ê∞ë‰πãÂ¶ª',
                        age: 18,
                        spouse: 'Âπ≥Ê∞ëÂïÜÊà∑',
                        family: 'ÊôÆÈÄöÂπ≥Ê∞ë',
                        location: 'Ê∂øÂéø',
                        goal: 'Áõ∏Â§´ÊïôÂ≠ê',
                        stats: { force: 5, body: 8, wisdom: 5, lead: 4, charm: 8 }
                    },
                    '5': {
                        name: 'ÂàòÊ∞è',
                        identity: 'ÊµÅ‰∫°Ë¥µÂ•≥',
                        age: 21,
                        spouse: 'ÊöÇÊó†ÈÖçÂÅ∂',
                        family: 'Ë¥•ËêΩÂÆ∂Êóè',
                        location: 'ÈïøÂÆâ',
                        goal: '‰π±‰∏ñÊ±ÇÁîü',
                        stats: { force: 4, body: 7, wisdom: 8, lead: 5, charm: 9 }
                    },
                    '6': {
                        name: 'Â≠ôÊ∞è',
                        identity: 'ÂïÜÊà∑‰πãÂ¶ª',
                        age: 19,
                        spouse: 'Âπ≥Ê∞ëÂïÜÊà∑',
                        family: 'ÊôÆÈÄöÂπ≥Ê∞ë',
                        location: 'ÊàêÈÉΩ',
                        goal: 'ËæÖ‰ΩêÂ§´Âêõ',
                        stats: { force: 3, body: 6, wisdom: 7, lead: 6, charm: 8 }
                    }
                };

                customCharData = sceneMap[selectedScene];
                switchStep(step2, step4);
            });

            // Ê≠•È™§3 -> Ê≠•È™§1
            step3Prev.addEventListener('click', () => {
                switchStep(step3, step1);
            });

            // Âú∞ÁÇπÈÄâÊã©ÈÄªËæëÔºàÊòæÁ§∫/ÈöêËóèËá™ÂÆö‰πâËæìÂÖ•Ê°ÜÔºâ
            locationRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Ëá™ÂÆö‰πâ') {
                        customLocationGroup.classList.add('active');
                        customLocation.required = true;
                    } else {
                        customLocationGroup.classList.remove('active');
                        customLocation.required = false;
                    }
                });
            });

            // ‰∫∫ÁîüÁõÆÊ†áÈÄâÊã©ÈÄªËæëÔºàÊòæÁ§∫/ÈöêËóèËá™ÂÆö‰πâËæìÂÖ•Ê°ÜÔºâ
            goalRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Ëá™ÂÆö‰πâ') {
                        customGoalGroup.classList.add('active');
                        customGoal.required = true;
                    } else {
                        customGoalGroup.classList.remove('active');
                        customGoal.required = false;
                    }
                });
            });

            // Ëá™ÂÆö‰πâËßíËâ≤Â±ûÊÄßÊªëÂùóÈÄªËæë
            let stats = {
                force: 5,
                body: 7,
                wisdom: 7,
                lead: 5,
                charm: 11
            };

            statSliders.forEach(slider => {
                slider.addEventListener('input', function() {
                    const statType = this.id.replace('Slider', '');
                    const newValue = parseInt(this.value);
                    const oldValue = stats[statType];
                    const diff = newValue - oldValue;

                    // ËÆ°ÁÆóÂΩìÂâçÊÄªÂàÜ
                    let currentTotal = Object.values(stats).reduce((a, b) => a + b, 0);
                    const newTotal = currentTotal + diff;

                    // ÈôêÂà∂ÊÄªÂàÜ‰∏çË∂ÖËøá35
                    if (newTotal <= 35 && newTotal >= 5) {
                        stats[statType] = newValue;
                        document.getElementById(`${statType}Value`).textContent = newValue;
                        totalStats.textContent = newTotal;
                    } else {
                        // Ë∂ÖËøá‰∏äÈôêÂàôÂõûÈÄÄ
                        this.value = oldValue;
                    }
                });
            });

            // Ë°®ÂçïÊèê‰∫§ -> Ê≠•È™§4ÔºàÂâßÊÉÖÈÄâÊã©Ôºâ
            customCharForm.addEventListener('submit', function(e) {
                e.preventDefault();

                // Êî∂ÈõÜË°®ÂçïÊï∞ÊçÆ
                const locationValue = document.querySelector('input[name="location"]:checked').value;
                const finalLocation = locationValue === 'Ëá™ÂÆö‰πâ' ? customLocation.value.trim() : locationValue;

                const goalValue = document.querySelector('input[name="goal"]:checked').value;
                const finalGoal = goalValue === 'Ëá™ÂÆö‰πâ' ? customGoal.value.trim() : goalValue;

                // È™åËØÅËá™ÂÆö‰πâËæìÂÖ•
                if (locationValue === 'Ëá™ÂÆö‰πâ' && !finalLocation) {
                    alert('ËØ∑ËæìÂÖ•Ëá™ÂÆö‰πâÂú∞ÁÇπ');
                    return;
                }
                if (goalValue === 'Ëá™ÂÆö‰πâ' && !finalGoal) {
                    alert('ËØ∑ËæìÂÖ•Ëá™ÂÆö‰πâ‰∫∫ÁîüÁõÆÊ†á');
                    return;
                }

                customCharData = {
                    name: charName.value.trim(),
                    identity: charIdentity.value.trim(),
                    age: parseInt(charAge.value),
                    spouse: document.querySelector('input[name="spouse"]:checked').value,
                    family: document.querySelector('input[name="family"]:checked').value,
                    location: finalLocation,
                    goal: finalGoal,
                    stats: stats
                };

                switchStep(step3, step4);
            });

            // Ê≠•È™§4 -> Ê≠•È™§3
            step4Prev.addEventListener('click', () => {
                switchStep(step4, step3);
                selectedPlot = null;
                plotOptions.forEach(opt => opt.classList.remove('selected'));
                customPlotGroup.classList.remove('active');
            });

            // Ê≠•È™§4 ÈÄâÊã©ÂâßÊÉÖ
            plotOptions.forEach(option => {
                option.addEventListener('click', function() {
                    selectedPlot = this.dataset.plot;
                    plotOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');

                    if (selectedPlot === 'custom') {
                        customPlotGroup.classList.add('active');
                        customPlot.required = true;
                    } else {
                        customPlotGroup.classList.remove('active');
                        customPlot.required = false;
                    }
                });
            });

            // Ê≠•È™§4 -> Ê≠•È™§5ÔºàÁîüÊàêËßíËâ≤ÊëòË¶ÅÔºâ
            step4Next.addEventListener('click', () => {
                if (!selectedPlot) {
                    alert('ËØ∑ÈÄâÊã©‰∏Ä‰∏™ÂàùÂßãÂâßÊÉÖÊàñËá™ÂÆö‰πâÂâßÊÉÖ');
                    return;
                }

                if (selectedPlot === 'custom' && !customPlot.value.trim()) {
                    alert('ËØ∑ËæìÂÖ•Ëá™ÂÆö‰πâÂàùÂßãÂâßÊÉÖ');
                    return;
                }

                // ÂâßÊÉÖÊò†Â∞Ñ
                const plotMap = {
                    '1': 'Ê∑±ÂÆÖÂ§úËØù¬∑Â§´ÂêõÊ¨≤Ëµ∑ÂÖµËÆ®Ë¥ºÔºåÈóÆ‰Ω†ÊÑèËßÅ‚Äî‚Äî‰π±‰∏ñÂ∞ÜËá≥Ôºå‰Ω†ÊòØÂäù‰ªñË∞®ÊÖéË°å‰∫ãÔºåËøòÊòØÊîØÊåÅ‰ªñÂª∫ÂäüÁ´ã‰∏öÔºü',
                    '2': '‰π±‰∏ñÊµÅ‰∫°¬∑ÂÆ∂ÊóèÈÅ≠ÂÖµÁ•∏Ôºå‰Ω†Â∏¶ÁùÄÊóè‰∫∫ÂØªÊâæÂÆâË∫´‰πãÂ§Ñ‚Äî‚ÄîÂâçË∑ØÊº´Êº´ÔºåÊòØÊäïÂ•î‰∫≤ÂèãÔºåËøòÊòØÂè¶ÂØª‰∏ñÂ§ñÊ°ÉÊ∫êÔºü',
                    '3': 'ÂåªÈ¶ÜÊïë‰∫∫¬∑Êàò‰π±‰∏≠ÁòüÁñ´Ê®™Ë°åÔºå‰Ω†Âá≠ÂåªÊúØÊïëÊ≤ª‰π°ÈÇª‚Äî‚ÄîËçØÊùêÂåÆ‰πèÔºåÊòØ‰ºòÂÖàÊïëÊ≤ªÂØå‰∫∫Êç¢ÂæóÁâ©ËµÑÔºåËøòÊòØÂùöÂÆàÂåªËÄÖ‰ªÅÂøÉ‰∏çÂàÜË¥µË¥±Ôºü',
                    '4': 'Âà´Èô¢ÈÄ¢Âèã¬∑Ê∏∏Â≠¶ÈÄî‰∏≠ÂÅ∂ÈÅáÂêçÂ£´ÔºåÂÖ±ËÆ∫Â§©‰∏ãÂ§ßÂäø‚Äî‚ÄîÂØπÊñπÈÇÄ‰Ω†ÂêåË°åËæÖ‰ΩêÊòé‰∏ªÔºå‰Ω†ÊòØÊ¨£ÁÑ∂Â∫îÂÖÅÔºåËøòÊòØÂùöÂÆàÊú¨ÂøÉÁã¨ÂñÑÂÖ∂Ë∫´Ôºü',
                    '5': 'ÂïÜÊà∑Âç±Êú∫¬∑Â§´ÂêõÁªèÂïÜÈÅáÂä´ÔºåË¥ßÁâ©Ë¢´Âä´„ÄÅËµÑÈáëÁü≠Áº∫‚Äî‚Äî‰Ω†ÊòØÂá∫Èù¢Âë®ÊóãÊùÉË¥µËÆ®ÂõûÂÖ¨ÈÅìÔºåËøòÊòØÂè¶ÂØªÂïÜÊú∫ÈáçÊåØÂÆ∂‰∏öÔºü',
                    'custom': customPlot.value.trim()
                };

                const finalPlot = plotMap[selectedPlot];
                generateCharSummary(customCharData, finalPlot);
                switchStep(step4, step5);
            });

            // ÁîüÊàêËßíËâ≤ÊëòË¶Å
            function generateCharSummary(charData, plot) {
                const charSummary = document.getElementById('charSummary');
                const plotSummary = document.getElementById('plotSummary');

                charSummary.innerHTML = `
                    <h3 style="font-family: var(--title-font); color: var(--title-color); text-align: center; margin-bottom: 20px;">${charData.name} ¬∑ Ê±âÊú´Á∫¢È¢úÊ°£Ê°à</h3>
                    <p><strong>Ë∫´‰ªΩËÉåÊôØÔºö</strong>${charData.identity}</p>
                    <p><strong>Âπ¥ÈæÑÔºö</strong>${charData.age}Â≤Å</p>
                    <p><strong>ÈÖçÂÅ∂ÊÉÖÂÜµÔºö</strong>${charData.spouse}</p>
                    <p><strong>ÂÆ∂ÊóèËÉåÊôØÔºö</strong>${charData.family}</p>
                    <p><strong>ÂàùÂßãÂú∞ÁÇπÔºö</strong>${charData.location}</p>
                    <p><strong>‰∫∫ÁîüÁõÆÊ†áÔºö</strong>${charData.goal}</p>
                    <p style="margin-top: 15px; padding-top: 15px; border-top: 1px dashed var(--border-color);">
                        <strong>Ê†∏ÂøÉÂ±ûÊÄßÔºö</strong><br>
                        Ê≠¶ÂäõÔºö${charData.stats.force} ¬∑ ‰ΩìÈ≠ÑÔºö${charData.stats.body} ¬∑ Êô∫Ë∞ãÔºö${charData.stats.wisdom} ¬∑ È¢ÜÂØºÔºö${charData.stats.lead} ¬∑ È≠ÖÂäõÔºö${charData.stats.charm}
                    </p>
                `;

                plotSummary.textContent = finalPlot;
            }

            // ÂºÄÂßãÊ∏∏Êàè
            startGameBtn.addEventListener('click', () => {
                if (typeof SillyTavern !== 'undefined' && SillyTavern.chat) {
                    const charName = customCharData.name;
                    const location = customCharData.location;
                    const identity = customCharData.identity;
                    const plot = document.getElementById('plotSummary').textContent;
                    const stats = customCharData.stats;

                    const startMessage = `Ê±âÊú´‰π±‰∏ñÔºå${charName}Ôºà${identity}Ôºå${customCharData.age}Â≤ÅÔºâ‰∫é${location}ÂºÄÂêØ‰∫∫ÁîüÊóÖÁ®ã„ÄÇ${customCharData.spouse}Ôºå${customCharData.family}Âá∫Ë∫´ÔºåÂøÉÊÄÄ${customCharData.goal}‰πãÂøó„ÄÇÂ±ûÊÄßÔºöÊ≠¶Âäõ${stats.force}„ÄÅ‰ΩìÈ≠Ñ${stats.body}„ÄÅÊô∫Ë∞ã${stats.wisdom}„ÄÅÈ¢ÜÂØº${stats.lead}„ÄÅÈ≠ÖÂäõ${stats.charm}„ÄÇÂºÄÁØáÂâßÊÉÖÔºö${plot} ÊïÖ‰∫ãÁî±Ê≠§Â±ïÂºÄ...`;

                    if (SillyTavern.chat.length === 0) {
                        SillyTavern.createChat({
                            title: `${charName}ÁöÑÊ±âÊú´‰πãÊóÖ`,
                            mes: startMessage,
                            swipes: [startMessage]
                        });
                    } else {
                        SillyTavern.chat[0].mes = startMessage;
                        SillyTavern.chat[0].swipes = [startMessage];
                        SillyTavern.saveChat();
                    }

                    SillyTavern.reloadCurrentChat();
                    alert('Ê∏∏ÊàèÂ∑≤ÂêØÂä®ÔºåÁ•ù‰Ω†ÊóÖÈÄîÈ°∫Âà©ÔºÅ');
                } else {
                    alert('Êú™Ê£ÄÊµãÂà∞SillyTavernÁéØÂ¢ÉÔºåËßíËâ≤Â∑≤ÂàõÂª∫ÂÆåÊàêÔºÅ');
                }
            });
        });
    </script>
</body>
</html>
